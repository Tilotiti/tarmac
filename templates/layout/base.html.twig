<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}Accueil
			{% endblock %}
			- Tarmac
		</title>
		<link rel="icon" href="{{ asset('glider.svg') }}">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@latest/dist/css/tabler.min.css"/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css"/>
		{% block stylesheets %}
			<link rel="stylesheet" href="{{ asset('styles/app.css') }}">
		{% endblock %}

		{% block importmap %}
			{{ importmap('app') }}
		{% endblock %}
	</head>
	<body>
		<div class="page">
			{% if app.user %}
				<header class="navbar navbar-expand-md d-print-none" style="min-height: 3rem;">
					<div class="container-xl">
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation" style="min-height: 44px; min-width: 44px;">
							<span class="navbar-toggler-icon"></span>
						</button>
						<div class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal p-0 m-0 me-4">
							{% block navbar_brand %}
								<a href="{{ path('public_landing') }}">
									<img src="{{ asset('logo.png') }}" alt="Tarmac">
								</a>
							{% endblock %}
						</div>
						<div class="navbar-nav flex-row order-md-last">
							{% block user_dropdown %}
								<div class="nav-item dropdown">
									<a href="#" class="nav-link d-flex lh-1 p-0 px-2" data-bs-toggle="dropdown" aria-label="Ouvrir le menu utilisateur" style="min-height: 44px; min-width: 44px;">
										<span class="avatar avatar-sm">{{ app.user.firstname[:1] }}{{ app.user.lastname[:1] }}</span>
										<div class="d-none d-md-block ps-2">
											<div class="small">{{ app.user.fullName|default('Utilisateur') }}</div>
											{% block user_dropdown_subtitle %}
												<div class="small text-secondary">{{ app.user.email }}</div>
											{% endblock %}
										</div>
									</a>
									<div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
										{% block user_dropdown_menu %}
											<a href="{{ path('public_profile_edit') }}" class="dropdown-item">
												<i class="ti ti-user"></i>
												{{ 'myProfile'|trans }}
											</a>
											{% if is_granted('ROLE_ADMIN') %}
												<div class="dropdown-divider"></div>
												<a href="{{ path('admin_dashboard') }}" class="dropdown-item">
													<i class="ti ti-shield"></i>
													{{ 'administration'|trans }}
												</a>
											{% endif %}
											<div class="dropdown-divider"></div>
											<a href="{{ path('public_logout') }}" class="dropdown-item">
												<i class="ti ti-logout"></i>
												{{ 'logout'|trans }}
											</a>
										{% endblock %}
									</div>
								</div>
							{% endblock %}
						</div>
						<div class="collapse navbar-collapse" id="navbar-menu">
							<div class="d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center"> {% block navbar_menu %}{% endblock %}
								</div>
							</div>
						</div>
					</header>
				{% endif %}

				<main class="page-wrapper">
					<div class="page-body">
						<div class="container-xl">
							{% for label, messages in app.flashes %}
								{% for message in messages %}
									<div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
										<div class="d-flex">
											<div>
												<i class="ti ti-{{ label == 'success' ? 'check' : label == 'warning' ? 'alert-triangle' : label == 'danger' ? 'alert-circle' : 'info-circle' }} me-2"></i>
											</div>
											<div>
												{{ message|trans }}
											</div>
										</div>
										<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="{{ 'close'|trans }}"></button>
									</div>
								{% endfor %}
							{% endfor %}

							{% block body %}{% endblock %}
						</div>
					</div>
				</main>
			</div>

			{% block javascripts %}{% endblock %}
		</body>
	</html>
