{% extends 'layout/base.html.twig' %}

{% block title %}Mes clubs
{% endblock %}

{% block navbar_brand %}
	<a href="{{ path('public_clubs') }}">
		<img src="{{ asset('logo.svg') }}" alt="Tarmac" height="10">
	</a>
{% endblock %}

{% block body %}
	<div class="page-header d-print-none">
		<div class="container-xl">
			<div class="row g-2 align-items-center">
				<div class="col">
					<h2 class="page-title">
						Mes clubs
					</h2>
					<div class="text-secondary mt-1">
						Bonjour
						{{ app.user.fullName }}
						!
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="page-body">
		<div class="container-xl">
			{% if clubs|length > 0 %}
				<div class="row">
					{% for club in clubs %}
						<div class="col-12 mb-3">
							<a href="{{ subdomainService.generateClubUrl(club.subdomain, '/') }}" class="text-decoration-none">
								<div class="card card-link" style="cursor: pointer;">
									<div class="card-body">
										<div class="d-flex align-items-start">
											{# Club Avatar #}
											<span class="avatar avatar-lg me-3 bg-blue-lt">
												<i class="ti ti-windsock text-blue" style="font-size: 1.5rem;"></i>
											</span>

											{# Main content #}
											<div class="flex-grow-1">
												{# Club name (main title) #}
												<h3 class="card-title mb-1">
													{{ club.name }}
												</h3>

												{# Subdomain (subtitle) #}
												<div class="text-secondary mb-2">
													<i class="ti ti-world me-1"></i>
													{{ club.subdomain }}.{{ subdomainService.domain }}
												</div>
											</div>

											{# Role badges on desktop - right side #}
											<div class="ms-3 d-none d-md-flex gap-2 align-items-start">
												{% if app.user.isManagerOfClub(club) %}
													<span class="badge bg-success text-white">
														<i class="ti ti-shield-check me-1"></i>
														Gestionnaire
													</span>
												{% endif %}
												{% if app.user.isInspectorOfClub(club) %}
													<span class="badge bg-warning text-white">
														<i class="ti ti-eye-check me-1"></i>
														Inspecteur
													</span>
												{% endif %}
												{% if not app.user.isManagerOfClub(club) and not app.user.isInspectorOfClub(club) %}
													<span class="badge bg-blue text-white">
														<i class="ti ti-user me-1"></i>
														Membre
													</span>
												{% endif %}
											</div>
										</div>

										{# Role badges on mobile - full width under content #}
										<div class="d-flex d-md-none gap-2 flex-wrap mt-3">
											{% if app.user.isManagerOfClub(club) %}
												<span class="badge bg-success text-white">
													<i class="ti ti-shield-check me-1"></i>
													Gestionnaire
												</span>
											{% endif %}
											{% if app.user.isInspectorOfClub(club) %}
												<span class="badge bg-warning text-white">
													<i class="ti ti-eye-check me-1"></i>
													Inspecteur
												</span>
											{% endif %}
											{% if not app.user.isManagerOfClub(club) and not app.user.isInspectorOfClub(club) %}
												<span class="badge bg-blue text-white">
													<i class="ti ti-user me-1"></i>
													Membre
												</span>
											{% endif %}
										</div>
									</div>
								</div>
							</a>
						</div>
					{% endfor %}
				</div>
			{% else %}
				<div class="empty">
					<div class="empty-img">
						<img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='128' height='128'%3E%3Ccircle cx='64' cy='64' r='50' fill='none' stroke='%23dae1e7' stroke-width='2'/%3E%3C/svg%3E" alt="" height="128">
					</div>
					<p class="empty-title">Aucun club</p>
					<p class="empty-subtitle text-secondary">
						Vous n'avez pas encore accès à un club actif.
					</p>
					<p class="empty-subtitle text-secondary">
						Contactez votre gestionnaire de club pour obtenir une invitation.
					</p>
				</div>
			{% endif %}
		</div>
	</div>
{% endblock %}
