{% extends 'admin/base.html.twig' %}

{% block page_title %}Clubs
{% endblock %}

{% block page_actions %}
	<a href="{{ path('admin_club_new') }}" class="btn btn-primary" style="min-height: 44px;">
		<i class="ti ti-plus me-2"></i>
		<span class="d-none d-sm-inline">Nouveau club</span>
		<span class="d-inline d-sm-none">Nouveau</span>
	</a>
{% endblock %}

{% block page_content %}
	{# Filter Component - Mobile-first with offcanvas #}
	{% include 'component/filters.html.twig' with {form: filters} %}

	{# Club cards - Mobile-first design #}
	<div class="row">
		{% for club in clubs %}
			<div class="col-12 mb-3">
				<a href="{{ path('admin_club_show', {id: club.id}) }}" class="text-decoration-none">
					<div class="card card-link {% if not club.active %}border-danger{% endif %}" style="cursor: pointer;">
						<div class="card-body">
							<div class="d-flex align-items-start">
								{# Club Avatar #}
								<span class="avatar avatar-lg me-3 {% if club.active %}bg-blue-lt{% else %}bg-danger-lt{% endif %}">
									<i class="ti ti-windsock {% if club.active %}text-blue{% else %}text-danger{% endif %}" style="font-size: 1.5rem;"></i>
								</span>

								{# Main content #}
								<div class="flex-grow-1">
									{# Club name (main title) #}
									<h3 class="card-title mb-1 {% if not club.active %}text-danger{% endif %}">
										{{ club.name }}
									</h3>

									{# Subdomain (subtitle) #}
									<div class="{% if not club.active %}text-danger{% else %}text-secondary{% endif %} mb-2">
										<i class="ti ti-world me-1"></i>
										{{ club.subdomain }}.{{ domain }}
									</div>

									{# Members count on mobile #}
									<div class="text-secondary small d-md-none">
										<i class="ti ti-users me-1"></i>
										{{ club.memberships|length }}
										{{ club.memberships|length > 1 ? 'membres' : 'membre' }}
									</div>
								</div>

								{# Badges on desktop - right side #}
								<div class="ms-3 d-none d-md-flex gap-2 align-items-start">
									{# Members badge #}
									<span class="badge bg-blue text-white">
										<i class="ti ti-users me-1"></i>
										{{ club.memberships|length }}
										{{ club.memberships|length > 1 ? 'membres' : 'membre' }}
									</span>

									{# Status badge #}
									{% if club.active %}
										<span class="badge bg-success text-white">
											<i class="ti ti-circle-check me-1"></i>
											Actif
										</span>
									{% else %}
										<span class="badge bg-danger text-white">
											<i class="ti ti-ban me-1"></i>
											Inactif
										</span>
									{% endif %}
								</div>
							</div>

							{# Badges on mobile - full width under avatar #}
							<div class="d-flex d-md-none gap-2 flex-wrap mt-3">
								{# Status badge #}
								{% if club.active %}
									<span class="badge bg-success text-white">
										<i class="ti ti-circle-check me-1"></i>
										Actif
									</span>
								{% else %}
									<span class="badge bg-danger text-white">
										<i class="ti ti-ban me-1"></i>
										Inactif
									</span>
								{% endif %}
							</div>
						</div>
					</div>
				</a>
			</div>
		{% else %}
			<div class="col-12">
				<div class="card">
					<div class="card-body text-center text-secondary">
						<em>Aucun club trouv√©</em>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>

	{# Pagination #}
	<div class="d-flex justify-content-center mt-4">
		{{ pagination(clubs) }}
	</div>
{% endblock %}
