{% extends 'app/base.html.twig' %}

{% block title %}Tableau de bord
{% endblock %}

{% block body %}
	<div class="page-header d-print-none">
		<div class="container-xl">
			<div class="row g-2 align-items-center">
				<div class="col">
					<h2 class="page-title">
						Tableau de bord
					</h2>
				</div>
			</div>
		</div>
	</div>

	<div class="page-body">
		<div class="container-xl">
			<div
				class="row row-deck row-cards">
				{# Welcome card - always full width #}
				<div class="col-12">
					<div class="card">
						<div class="card-header">
							<h3 class="card-title">Bienvenue sur Tarmac</h3>
						</div>
						<div class="card-body">
							<p class="text-secondary">
								Bonjour
								<strong>{{ app.user.fullName }}</strong>
								!
							</p>
							<p>
								Vous êtes connecté(e) en tant que :
								<strong>{{ app.user.email }}</strong>
							</p>
							<p class="mb-0">
								Vos rôles :
								{% for role in app.user.roles %}
									<span class="badge bg-blue-lt">
										{% if role == 'ROLE_ADMIN' %}
											Administrateur
										{% elseif role == 'ROLE_MANAGER' %}
											Manager
										{% elseif role == 'ROLE_INSPECTOR' %}
											Inspecteur
										{% elseif role == 'ROLE_USER' %}
											Utilisateur
										{% else %}
											{{ role }}
										{% endif %}
									</span>
								{% endfor %}
							</p>
						</div>
					</div>
				</div>

				{# Action cards - mobile-first: single column, then responsive #}
				{% if is_granted('ROLE_MANAGER') %}
					<div class="col-12 col-md-6 col-lg-4">
						<div class="card">
							<div class="card-body">
								<div class="d-flex align-items-center">
									<div class="subheader">Gestion</div>
								</div>
								<div class="h1 mb-3">
									<i class="ti ti-users"></i>
								</div>
								<div class="d-flex mb-2">
									<div>Utilisateurs</div>
								</div>
								<a href="{{ path('app_user_index') }}" class="btn btn-primary w-100" style="min-height: 44px;">
									Gérer les utilisateurs
								</a>
							</div>
						</div>
					</div>
				{% endif %}

				<div class="col-12 col-md-6 col-lg-4">
					<div class="card">
						<div class="card-body">
							<div class="d-flex align-items-center">
								<div class="subheader">Mon compte</div>
							</div>
							<div class="h1 mb-3">
								<i class="ti ti-user"></i>
							</div>
							<div class="d-flex mb-2">
								<div>Profil</div>
							</div>
							<a href="{{ path('app_profile_edit') }}" class="btn btn-outline-primary w-100" style="min-height: 44px;">
								Modifier mon profil
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
